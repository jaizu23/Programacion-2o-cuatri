def numeros_posibles (numero: str, cifras: int) -> set[str]:
    """
    Devuelve una lista con todos los posibles números de 'cifras' cifras que se pueden formar
    con combinaciones de los dígitos del número dado manteniendo el orden del número original.
    """
    if cifras > len(numero) or cifras <= 0 or len(numero) == 0:
        return set()
    elif cifras == 1:
        return set(numero)

    resultado = set() # Usamos un set para evitar que se repitan números
    for i, digito in enumerate(numero):
        sub_resultados = numeros_posibles(numero[i + 1:], cifras - 1)
        for sub_resultado in sub_resultados:
            resultado.add(digito + sub_resultado)

    return resultado

# Prueba simple de uso
numero = "115124"
cifras = 4
print(numeros_posibles(numero, cifras))

##############################
#          TESTS             #
##############################

def test_numeros_posibles_limite1 ():
    numero = ""
    cifras = 3
    resultado = numeros_posibles(numero, cifras)
    assert resultado == set(), f"El resultado no es el esperado (set vacío), sino {resultado}"

def test_numeros_posibles_limite2 ():
    numero = "1235126"
    cifras = -7
    resultado = numeros_posibles(numero, cifras)
    assert resultado == set(), f"El resultado no es el esperado (set vacío), sino {resultado}"

def test_numeros_posibles_dificil1 (benchmark):
    numero = "115124123512531"
    cifras = 6
    resultado = benchmark(numeros_posibles, numero, cifras)
    assert resultado == {'112325', '513231', '522531', '151112', '512515', '121525', '141215', '111415', '543531', '114211', '522512', '514515', '151235', '512233', '155131', '531253', '511213', '112215', '111111', '513523', '112253', '141525', '512133', '212512', '141523', '121551', '545151', '154553', '241125', '242315', '154225', '541252', '215123', '142551', '522353', '151511', '242512', '142512', '142151', '423151', '512212', '514225', '142553', '135131', '151242', '124312', '521511', '124135', '124123', '152312', '241512', '225123', '112115', '121325', '541151', '514523', '514221', '141123', '514111', '124313', '521525', '542153', '151521', '511523', '115123', '115325', '541225', '143553', '142311', '421231', '115253', '515151', '141252', '111351', '153251', '143153', '412551', '514315', '512151', '152113', '512435', '112323', '215251', '435121', '543551', '423251', '511151', '142353', '543513', '541513', '522231', '223125', '141312', '154331', '122123', '413515', '124251', '115521', '112131', '225253', '243253', '225121', '123553', '512355', '121212', '112135', '112432', '541323', '212325', '124113', '515153', '212355', '141531', '124553', '112132', '524523', '122131', '511511', '512412', '241232', '111453', '251231', '124512', '522312', '513511', '152313', '242531', '541523', '524211', '541321', '151421', '431251', '152515', '523525', '112411', '124132', '541255', '423121', '512235', '141225', '115411', '241553', '541211', '123131', '241312', '425153', '524521', '122331', '241131', '521521', '512325', '115312', '151355', '511125', '524315', '522123', '145131', '151212', '524133', '121233', '215253', '154122', '542523', '125131', '122311', '141325', '132531', '514132', '223521', '114513', '242123', '142523', '121225', '152252', '525153', '524511', '124131', '223553', '115155', '543123', '152422', '152415', '245251', '425251', '131531', '223551', '511521', '135123', '114225', '215131', '124515', '243125', '124213', '523521', '514112', '522521', '152233', '522323', '531251', '121253', '514213', '124221', '542325', '141153', '152331', '151331', '423531', '151233', '521212', '235153', '111243', '112431', '112412', '521323', '512232', '542253', '151241', '112152', '151415', '112211', '521551', '121531', '152315', '112355', '512155', '154252', '143523', '243511', '113512', '114253', '124153', '152323', '141235', '511211', '112312', '152231', '241525', '122511', '111122', '152432', '112212', '114113', '114352', '513151', '524553', '151315', '122553', '511351', '525531', '511353', '213253', '213511', '241531', '514525', '115151', '511123', '543251', '124215', '514251', '121211', '142352', '514531', '151255', '122353', '511225', '511153', '113251', '153531', '135153', '115523', '154312', '412523', '522525', '111515', '514353', '542311', '152512', '114323', '211531', '521321', '514511', '231253', '151153', '115232', '114351', '154153', '512451', '131253', '121123', '114132', '115242', '151122', '213512', '451531', '524232', '521312', '111323', '521153', '243525', '514232', '243153', '115212', '143125', '221251', '512431', '121153', '112422', '521352', '141253', '115124', '511235', '435125', '145121', '121232', '542521', '412553', '225151', '114121', '415125', '114223', '425151', '155125', '514131', '122153', '114313', '142231', '542313', '512112', '141211', '153523', '112151', '153253', '543511', '541153', '112435', '423153', '111131', '513153', '122352', '535125', '122521', '152251', '524135', '124112', '142153', '113253', '154251', '213251', '151525', '241211', '152531', '124513', '241233', '511215', '513525', '423551', '521215', '115452', '415151', '122515', '223525', '524125', '512115', '111251', '124121', '112122', '114133', '152155', '242353', '114152', '115551', '111321', '141355', '112451', '512231', '151313', '541212', '521353', '143151', '154353', '512521', '111222', '513251', '513521', '435151', '143512', '111421', '152253', '413231', '154325', '241331', '235531', '153153', '421253', '154111', '211253', '251531', '111455', '141513', '111511', '142355', '151111', '541521', '115355', '145231', '155253', '151253', '241355', '121311', '152551', '212353', '124331', '412131', '213123', '235251', '523523', '514212', '124525', '514233', '112252', '115141', '225125', '552531', '122525', '514521', '212131', '541123', '121521', '235151', '114255', '512422', '431253', '121255', '111331', '541331', '245151', '521223', '512421', '121231', '115241', '114135', '524251', '213525', '115412', '522311', '413525', '235123', '124151', '513125', '112553', '143531', '121131', '112233', '151225', '154253', '112523', '513513', '141315', '412315', '243231', '523153', '523513', '225153', '521315', '124351', '223231', '511252', '125253', '151352', '541525', '231231', '112255', '251251', '114231', '115252', '112511', '412521', '124233', '241321', '413121', '523512', '113121', '141311', '151353', '423123', '542125', '542331', '521213', '152311', '425131', '423253', '111221', '152123', '524225', '141321', '243531', '114233', '512353', '514323', '143511', '543153', '122512', '514113', '112513', '121355', '121523', '241151', '243251', '151312', '215153', '111253', '153553', '231531', '152412', '142323', '351251', '213551', '114235', '151431', '115143', '111452', '115243', '115331', '514352', '524352', '151422', '514313', '112232', '531531', '111231', '514153', '512525', '515253', '243515', '415531', '514252', '535131', '152153', '154155', '113125', '112525', '115315', '154352', '115451', '143513', '524515', '121512', '521253', '111413', '235253', '115131', '521523', '241153', '123511', '143121', '242553', '512413', '154515', '121221', '113511', '135253', '111553', '211251', '241213', '111132', '142331', '111433', '112415', '412512', '114553', '114123', '151133', '122313', '113515', '413512', '541515', '151232', '242125', '242151', '511325', '541215', '514351', '142351', '435131', '425253', '235131', '242525', '121321', '142125', '112425', '114525', '141553', '154132', '154255', '141232', '122321', '524355', '152151', '412253', '152212', '112423', '415153', '152352', '151531', '242321', '141233', '114213', '124321', '512253', '115351', '524215', '152121', '153515', '151125', '112223', '524131', '522313', '242355', '511331', '142253', '113513', '154221', '114125', '542551', '152435', '111211', '142525', '152125', '112433', '111435', '152553', '122325', '514121', '242313', '514231', '122312', '524231', '235231', '522553', '115215', '524312', '112551', '223513', '535231', '154351', '122125', '541125', '522121', '541121', '541253', '154212', '241223', '515125', '151243', '212151', '212553', '152225', '512111', '542553', '242331', '152431', '125151', '514151', '514152', '112133', '154323', '512513', '242311', '514312', '114321', '151221', '154233', '141323', '241225', '242251', '121223', '512433', '121515', '115455', '423515', '535151', '512331', '114531', '123521', '152235', '114221', '121252', '111352', '115453', '135121', '514253', '524122', '415131', '112235', '522153', '213523', '514331', '413253', '222531', '523553', '113153', '115135', '152523', '521515', '124315', '412153', '524353', '111112', '514355', '122323', '111212', '241352', '152321', '243121', '243523', '142321', '112421', '123123', '141151', '124152', '142315', '524151', '151435', '212521', '511512', '112221', '111155', '513123', '141331', '145153', '155231', '111411', '111521', '512135', '152421', '423125', '521232', '512132', '412311', '111241', '151132', '545121', '154355', '532531', '215125', '542251', '152525', '114232', '124325', '115433', '111153', '151223', '125123', '124231', '122355', '124223', '251253', '111223', '524331', '152433', '123523', '514135', '151453', '113531', '535253', '153521', '242231', '523253', '511251', '151155', '124133', '535531', '212121', '541553', '413511', '511221', '123251', '115553', '154211', '221253', '522253', '145151', '213553', '412355', '541251', '123125', '122151', '523125', '155531', '154311', '421531', '515123', '452531', '241551', '115531', '243512', '151452', '524513', '152131', '135531', '524112', '123153', '223531', '512452', '514513', '213531', '154235', '521125', '512512', '524213', '545123', '521221', '124531', '124115', '142521', '511551', '121511', '152521', '524512', '112123', '152221', '515131', '115255', '114325', '111213', '124225', '245123', '524113', '514115', '151523', '141131', '114512', '122523', '412515', '435123', '512152', '413551', '522151', '112321', '154213', '432531', '151252', '115511', '415231', '513531', '525125', '542352', '113551', '121235', '212331', '512313', '514122', '152122', '153151', '541511', '151451', '522511', '151433', '152353', '115512', '412513', '521331', '125125', '512411', '435531', '114515', '545125', '511231', '511233', '212531', '243553', '542513', '412123', '541221', '541232', '115425', '225131', '111151', '111325', '111133', '114115', '212551', '115352', '512251', '112531', '542531', '124311', '241231', '524311', '115515', '511553', '241252', '143131', '152425', '115211', '115133', '245153', '241511', '543521', '524223', '215231', '155121', '413131', '242511', '115321', '124111', '142251', '114311', '212311', '142312', '142123', '413513', '541353', '115422', '351231', '151222', '154321', '151321', '151412', '213131', '521121', '512213', '152325', '221231', '151251', '512125', '241521', '114215', '413251', '535123', '153125', '542525', '115115', '115225', '514512', '153123', '523121', '152255', '115413', '513551', '515531', '145251', '215151', '542355', '351531', '521211', '513253', '115415', '241251', '151211', '541355', '124551', '411231', '225531', '521313', '521531', '515231', '511223', '415123', '143231', '212525', '412525', '521513', '521512', '151425', '151553', '242523', '212323', '512153', '155251', '512423', '514123', '121121', '412325', '141212', '513512', '543525', '241315', '155151', '542121', '114315', '243521', '112251', '151152', '124523', '151323', '141231', '113231', '153513', '241325', '524132', '512352', '152111', '111225', '213515', '213153', '114252', '111152', '122251', '522331', '242551', '121553', '512122', '152215', '121151', '542515', '541531', '512215', '122551', '151135', '151121', '413123', '154315', '512323', '541352', '152211', '154115', '512553', '223123', '154123', '521351', '212513', '512252', '151215', '232531', '435231', '121351', '242131', '112331', '241313', '543523', '141223', '545253', '543121', '422531', '151325', '152112', '412323', '221531', '241255', '114523', '112512', '412313', '141353', '112452', '143253', '154135', '154151', '225251', '114111', '524325', '242325', '545131', '151551', '115221', '154152', '114212', '522315', '223511', '151115', '124352', '512432', '524152', '153551', '523131', '524551', '124511', '112155', '114153', '413521', '243513', '111523', '114312', '141313', '411251', '525231', '123121', '243151', '141352', '115245', '352531', '115132', '154125', '121251', '542123', '135151', '111255', '252531', '522352', '421251', '511352', '525253', '152133', '431531', '524253', '212123', '124235', '124521', '423231', '114131', '235121', '524351', '145253', '512311', '511253', '512551', '225231', '115513', '154513', '111431', '111315', '151123', '152132', '513131', '542151', '112125', '124255', '113553', '114122', '512511', '154113', '242351', '242153', '113521', '245131', '545251', '111432', '142511', '522125', '524321', '143515', '541313', '541315', '525121', '111451', '152455', '114155', '512211', '241221', '151515', '425531', '511312', '521235', '152453', '223121', '152423', '121352', '115125', '543253', '125121', '242323', '112351', '154133', '154511', '123513', '121313', '153525', '241311', '522515', '413523', '154551', '122315', '521225', '524121', '512425', '514215', '412151', '511311', '111311', '152351', '242312', '113525', '121513', '545153', '114353', '212523', '114331', '124122', '212511', '515121', '114251', '143525', '125251', '115435', '114521', '111252', '512523', '523511', '151131', '512255', '241215', '542231', '223251', '141125', '524313', '541223', '241515', '411253', '115111', '124232', '425121', '413151', '121213', '512351', '413553', '522321', '141221', '111115', '223253', '431231', '241323', '522131', '154215', '213151', '121215', '111512', '115233', '152152', '423525', '154525', '212515', '151513', '512453', '114112', '514255', '145125', '415251', '111121', '241235', '451253', '511323', '514325', '213121', '212253', '524212', '112121', '522351', '115353', '243551', '531231', '143251', '514133', '213521', '512223', '541233', '212351', '112153', '542315', '115431', '141512', '115142', '123151', '155123', '511531', '351253', '522325', '524111', '123512', '152135', '514311', '512321', '152355', '545531', '523531', '124155', '242521', '121331', '522523', '243131', '412331', '111353', '511315', '131231', '541512', '112413', '551531', '524323', '521553', '154121', '151245', '142513', '241212', '115525', '514551', '543512', '154131', '522251', '522355', '511121', '112352', '514553', '542131', '241121', '111215', '231251', '112521', '423553', '423512', '312531', '511355', '522551', '123515', '114551', '143123', '115235', '143551', '113131', '151411', '512312', '151512', '543515', '212125', '115423', '423131', '124353', '523231', '411531', '412121', '111125', '115311', '242253', '142325', '524221', '541351', '423513', '151432', '124212', '125153', '543131', '521325', '551253', '151151', '151213', '543231', '521131', '112311', '142531', '154531', '242515', '154512', '541312', '154523', '541213', '114511', '412511', '514321', '152232', '141255', '523151', '412531', '111425', '111355', '115223', '121353', '523551', '115222', '141521', '525131', '523515', '213125', '543125', '511513', '525151', '115251', '514125', '111313', '115122', '125531', '152115', '141551', '122531', '412321', '512531', '423523', '512131', '242352', '152213', '241513', '151413', '151351', '111235', '112111', '121125', '121323', '141121', '541325', '545231', '223151', '512113', '141515', '523251', '112455', '152513', '212313', '154223', '514235', '112113', '123253', '112453', '153231', '122351', '525123', '514155', '111135', '524531', '151455', '511515', '113523', '154313', '524255', '115113', '245125', '141351', '512315', '223153', '412353', '415121', '541311', '124211', '425125', '111531', '124252', '115145', '512121', '551231', '152223', '123551', '141213', '123525', '511321', '145531', '535153', '213231', '524525', '521251', '152411', '521231', '245121', '114355', '511212', '235125', '155153', '524252', '142313', '524123', '212321', '135125', '451231', '113123', '115432', '535251', '542321', '111513', '512123', '514223', '213513', '541235', '515251', '111422', '521233', '112112', '111525', '215121', '111423', '153121', '115153', '511313', '114151', '513515', '425231', '451251', '541231', '111113', '112315', '423511', '122253', '143521', '135251', '115231', '115152', '154231', '111412', '154521', '245531', '542323', '141251', '542353', '524233', '211231', '212251', '115323', '511131', '513121', '153512', '112353', '115112', '521311', '115213', '131251', '542512', '212231', '135231', '524235', '212312', '524155', '512225', '413153', '525251', '153511', '541131', '113151', '242121', '123231', '543553', '121315', '152511', '111233', '111551', '152451', '241253', '245231', '541551', '215531', '115121', '154112', '511232', '152452', '125231', '542511', '241353', '241351', '154232', '512221', '111312', '142515', '413125', '112515', '514211', '142131', '412312', '542312', '413531', '425123', '153131', '412351', '111245', '151311', '112225', '111123', '511525', '412251', '435153', '122121', '513553', '524115', '435251', '524153', '212352', '242513', '522513', '521255', '121312', '141511', '415253', '152413', '412352', '142121', '511255', '223523', '123531', '212153', '435253', '512455', '122231', '151423', '212315', '223512', '112213', '521151', '535121', '124355', '124323', '115421', '151231', '542351', '521123', '245253', '145123', '412125', '521355', '523123', '111232', '423521', '111242', '241123', '122513', '112231', '124125', '241523', '512415', '115313', '223131', '223515', '124253', '551251', '112313', '412231', '151113', '521252', '243123', '543151'}, f"El resultado no es el esperado, sino {resultado}"